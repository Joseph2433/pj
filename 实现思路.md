## 第一阶段：核心框架搭建
1. **CMakeLists.txt** - 配置构建系统和SFML依赖
2. **src/Core/Game.h/cpp** - 游戏主类，创建窗口和游戏循环
3. **src/main.cpp** - 程序入口点
4. **测试目标**：能够打开一个空白的SFML窗口

## 第二阶段：资源和状态管理
5. **src/Core/ResourceManager.h/cpp** - 资源管理器，加载纹理和音效
6. **src/Core/GameState.h/cpp** - 游戏状态基类
7. **src/Core/StateManager.h/cpp** - 状态管理器
8. **src/States/MenuState.h/cpp** - 简单的主菜单状态
9. **测试目标**：显示一个简单的主菜单界面

## 第三阶段：基础实体系统
10. **src/Utils/Constants.h** - 游戏常量定义（网格大小、窗口尺寸等）
11. **src/Entities/Entity.h/cpp** - 实体基类
12. **src/Systems/Grid.h/cpp** - 9x5网格系统
13. **测试目标**：在屏幕上绘制网格线，验证坐标系统

## 第四阶段：植物系统
14. **src/Entities/Plant.h/cpp** - 植物基类
15. **src/Plants/Sunflower.h/cpp** - 向日葵（最简单的植物）
16. **src/Plants/Peashooter.h/cpp** - 豌豆射手
17. **src/Systems/PlantManager.h/cpp** - 植物管理器
18. **测试目标**：能够在网格上放置植物并显示

## 第五阶段：UI和交互
19. **src/UI/Button.h/cpp** - 按钮类
20. **src/UI/SeedPacket.h/cpp** - 种子包
21. **src/UI/HUD.h/cpp** - 游戏界面HUD
22. **src/States/GamePlayState.h/cpp** - 游戏进行状态
23. **测试目标**：能够通过点击种子包在网格上种植植物

## 第六阶段：僵尸和射击系统
24. **src/Entities/Zombie.h/cpp** - 僵尸基类
25. **src/Zombies/BasicZombie.h/cpp** - 普通僵尸
26. **src/Entities/Projectile.h/cpp** - 子弹基类
27. **src/Systems/ZombieManager.h/cpp** - 僵尸管理器
28. **测试目标**：僵尸从右侧出现并向左移动，植物能发射子弹

## 第七阶段：碰撞和游戏逻辑
29. **src/Systems/CollisionSystem.h/cpp** - 碰撞检测系统
30. **src/Core/Timer.h/cpp** - 计时器类
31. **src/Utils/Math.h/cpp** - 数学工具函数
32. **测试目标**：子弹能击中僵尸，僵尸能攻击植物

## 第八阶段：完善游戏机制
33. **src/Entities/Sun.h/cpp** - 阳光系统
34. **src/Systems/WaveManager.h/cpp** - 波次管理器
35. **src/Plants/WallNut.h/cpp** - 防御植物
36. **src/Zombies/ConeheadZombie.h/cpp** - 更多僵尸类型
37. **测试目标**：完整的游戏循环（收集阳光、种植、防御、波次）

## 第九阶段：音效和动画
38. **src/Utils/SoundManager.h/cpp** - 音效管理器
39. **src/Utils/Animation.h/cpp** - 动画系统
40. **测试目标**：游戏有音效和动画效果

## 第十阶段：完善状态系统
41. **src/States/PauseState.h/cpp** - 暂停状态
42. **src/States/GameOverState.h/cpp** - 游戏结束状态
43. **src/Plants/CherryBomb.h/cpp** - 特殊植物
44. **src/Zombies/BucketheadZombie.h/cpp** - 更强的僵尸

## 关键建议：

1. **每个阶段都要能编译运行** - 这样可以及时发现问题
2. **先实现功能，后优化性能** - 保证逻辑正确性优先
3. **使用简单的占位符资源** - 可以用彩色矩形代替复杂贴图
4. **频繁测试核心循环** - 确保游戏循环、渲染、输入处理正常
5. **预留扩展接口** - 为后续添加新植物和僵尸类型做准备


1. 声音文件 (Audio):

路径：../../assets/audio/gameplay_music.ogg
文件名：gameplay_music.ogg
需要你：在你的项目根目录下的 assets/audio/ 文件夹中放入一个名为 gameplay_music.ogg 的背景音乐文件 (Ogg Vorbis格式是推荐的)。
注意日志中的路径：../../assets/audio/gameplay_music.ogg。这表明你的 Game::loadGlobalResources() 在尝试加载音乐时，认为可执行文件在两层子目录之下 (例如 build/bin/)。
如果你的可执行文件确实在 build/bin/，而 assets 文件夹在项目根目录，那么这个相对路径 ../../assets/audio/gameplay_music.ogg 是正确的。加载失败意味着文件本身不存在于该位置，或者文件名不匹配。
如果你的可执行文件实际上是在 build/ 目录运行，那么路径应该是 ../assets/audio/gameplay_music.ogg。
2. 图片文件 (Images):

所有这些图片都提示加载失败，原因都是 "Unable to open file"。这意味着程序在指定的路径下找不到这些文件。
你需要检查你的 assets/images/ 目录结构，并确保以下文件存在于其对应的子目录中，并且文件名和扩展名完全正确（包括大小写，尤其是在Linux或macOS上编译时）。

路径前缀分析：
在 Game::loadGlobalResources() (用于 pea.png) 和 MenuState::enter() (用于 menu_background.png) 中，加载路径是 "assets/images/..."。这表示它期望 assets 文件夹与可执行文件在同一级或者当前工作目录设置正确。
在 GamePlayState::loadAssets() 中，游戏背景图的加载路径是 "../../assets/images/gameplay_background.jpg"，这个加载成功了！这强烈暗示 GamePlayState::loadAssets() 中的相对路径是正确的，而其他地方的相对路径（如 "assets/images/..."）是错误的（如果可执行文件在 build/bin/）。
在 HUD::setupShovelUI() 中，铲子图标路径是 "assets/images/ui/shovel.png"，也失败了。
结论：你的可执行文件很可能是在 build/bin/ 目录下运行。因此，所有直接使用 "assets/images/..." 作为路径的加载都会失败，而使用 "../../assets/images/..." 的加载会成功。

你需要修改所有资源加载处的路径，确保它们都是相对于可执行文件的正确相对路径。

需要补充或确认路径的图片列表 (都应该使用 ../../assets/images/... 格式，如果可执行文件在 build/bin/)：

Projectiles (子弹):

../../assets/images/projectiles/pea.png (对应 PEA_TEXTURE_KEY)
../../assets/images/projectiles/ice_pea.png (对应 ICE_PEA_TEXTURE_KEY)
UI (用户界面):

../../assets/images/menu_background.png (菜单背景)
../../assets/images/ui/shovel.png (对应 SHOVEL_TEXTURE_KEY)
../../assets/images/ui/shovel_cursor.png (对应 SHOVEL_CURSOR_TEXTURE_KEY)
../../assets/images/ui/sun.png (对应 SUN_TEXTURE_KEY)
Zombies (僵尸):

../../assets/images/zombies/basic_zombie.png (对应 BASIC_ZOMBIE_TEXTURE_KEY)
../../assets/images/zombies/conehead_zombie.png (对应 CONEHEAD_ZOMBIE_TEXTURE_KEY - 日志中显示为 big_zombie.png，你需要统一键名和文件名)
../../assets/images/zombies/buckethead_zombie.png (对应 BUCKETHEAD_ZOMBIE_TEXTURE_KEY - 日志中显示为 boss_zombie.png)
../../assets/images/zombies/football_zombie.png (对应 FOOTBALL_ZOMBIE_TEXTURE_KEY - 日志中显示为 quick_zombie.png)
Plants (植物 本体):

../../assets/images/plants/sunflower.png (对应 SUNFLOWER_TEXTURE_KEY)
../../assets/images/plants/peashooter.png (对应 PEASHOOTER_TEXTURE_KEY)
../../assets/images/plants/wallnut.png (对应 WALLNUT_TEXTURE_KEY)
../../assets/images/plants/ice_peashooter.png (对应 ICE_PEASHOOTER_TEXTURE_KEY)
Plants Icons (植物 图标 - 用于种子包):

../../assets/images/plants/sunflower_icon.png (对应 SUNFLOWER_ICON_TEXTURE_KEY)
../../assets/images/plants/peashooter_icon.png (对应 PEASHOOTER_ICON_TEXTURE_KEY)
../../assets/images/plants/wallnut_icon.png (对应 WALLNUT_ICON_TEXTURE_KEY - 日志中你加载 wallnut.png 作为了图标，通常图标和植物本身纹理不同)
../../assets/images/plants/ice_peashooter_icon.png (对应 ICE_PEASHOOTER_ICON_TEXTURE_KEY)